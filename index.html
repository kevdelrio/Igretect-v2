<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>Mise en page des données cadastrales</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header><h1>Mise en page des données cadastrales</h1></header>
<main>
<section class="card">
    <div class="upload-area">
        <div class="drop-zone" id="dropZoneA">
            <div class="drop-zone__prompt">
                <span class="icon-upload"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 01-9 0 4.5 4.5 0 019 0z" /></svg></span>
                <h3>Fichier A (Parties)</h3>
                <p>Glissez-déposez ou cliquez pour sélectionner</p>
            </div>
            <div class="drop-zone__file-info" style="display: none;"></div>
            <!-- MODIFIÉ : Ajout de l'attribut 'multiple' -->
            <input id="fileA" type="file" accept=".xlsx,.xls,.csv" class="drop-zone__input" multiple>
        </div>
        <div class="drop-zone" id="dropZoneB">
            <div class="drop-zone__prompt">
                <span class="icon-upload"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 01-9 0 4.5 4.5 0 019 0z" /></svg></span>
                <h3>Fichier B (Parcelles)</h3>
                <p>Glissez-déposez ou cliquez pour sélectionner</p>
            </div>
            <div class="drop-zone__file-info" style="display: none;"></div>
            <!-- MODIFIÉ : Ajout de l'attribut 'multiple' -->
            <input id="fileB" type="file" accept=".xlsx,.xls,.csv" class="drop-zone__input" multiple>
        </div>
    </div>
    
    <div id="notificationBar" style="display:none;"></div>

    <div class="actions-container">
        <div class="action-group-left inline-actions">
            <button id="btnGo" class="btn btn-brand" disabled><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" /></svg>Fusionner</button>
            <button id="btnRefresh" class="btn btn-light"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-11.664 0a8.25 8.25 0 010-11.664l3.181 3.183M2.985 19.644l3.181-3.182" /></svg>Rafraîchir</button>
            <button id="btnAddRow" class="btn btn-light"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>Ajouter une ligne</button>
            <button id="btnToggleCompact" class="btn btn-light"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5h10.5M6.75 12h10.5M6.75 16.5h10.5" /></svg><span class="label">Vue compacte</span></button>
        </div>
        <div class="action-group-right">
            <div class="search-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
                <input id="q" placeholder="Rechercher..." />
            </div>
            <button id="btnHelpConflicts" class="btn btn-light"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.475.416-.992.793-1.53 1.13-.53.332-.908.965-.908 1.639m0 3h.008v.008h-.008v-.008z" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>Aide conflits</button>
            <button id="btnExcel" class="btn btn-green" disabled><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>Excel</button>
            <button id="btnPDF" class="btn btn-red" disabled><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>PDF</button>
        </div>
    </div>

    <div class="main-content-area">
        <div id="counters"></div>
        <div class="table-wrap">
            <table id="tbl">
                <thead>
                    <tr>
                        <th>N°</th>
                        <th class="select-col"><input type="checkbox" id="selectAll" title="Tout sélectionner/désélectionner"></th>
                        <th>Identifiant</th>
                        <th>Propriétaires</th>
                        <th>Quote-part</th>
                        <th>Adresse</th>
                        <th>Pays ≠ BE</th>
                        <th>Capakey</th>
                        <th>Nature</th>
                        <th>Libellé</th>
                        <th>Surface</th>
                        <th class="compact-header advanced-col">Emprise PP</th>
                        <th class="compact-header advanced-col">Excédent</th>
                        <th class="compact-header advanced-col">Servitude</th>
                        <th class="compact-header advanced-col">Zone loc.</th>
                        <th class="compact-header advanced-col">Emprise PP (proc.)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

</section>

<div id="helpModal" class="help-modal-backdrop" aria-hidden="true">
    <div class="help-modal" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
        <h3 id="helpTitle">Résoudre un conflit GitHub</h3>
        <p>Quand GitHub signale un conflit, il faut obligatoirement choisir quoi garder&nbsp;: on ne peut pas le “passer outre”. Voici deux options rapides&nbsp;:</p>
        <ol>
            <li><strong>Sur GitHub</strong> : cliquez sur <em>Resolve conflicts</em>, lisez les marqueurs <code>&lt;&lt;&lt;&lt;&lt;&lt;</code> / <code>&gt;&gt;&gt;&gt;&gt;&gt;</code>, gardez la version souhaitée, supprimez les marqueurs puis validez avec <em>Mark as resolved</em> et <em>Commit merge</em>.</li>
            <li><strong>En local</strong> : récupérez les dernières modifications (<code>git fetch</code> puis <code>git pull</code>), ouvrez chaque fichier en conflit, choisissez la bonne portion, enregistrez, exécutez <code>git add</code> sur les fichiers corrigés, puis <code>git commit</code> et <code>git push</code>.</li>
        </ol>
        <div class="tip">Astuce&nbsp;: travaillez branche par branche et poussez souvent pour limiter les conflits. Si besoin, faites une copie du fichier avant de le modifier.</div>
        <div class="actions">
            <button id="btnCloseHelp" class="btn btn-light">Fermer</button>
        </div>
    </div>
</div>
</main>
<!-- Librairies -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/exceljs@4.4.0/dist/exceljs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

<script src="app.js"></script>
</body>
</html>